<!DOCTYPE HTML>
<html xmlns:th=”http://www.thymeleaf.org”>

<body>
<nav th:fragment="navbar" class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container">
        <a class="navbar-brand" th:text="${isAuth}!='' ? ${isAuth} : 'LOGIN'" th:href="${isAuth!='' && authUser!=null} ? @{'/user&'+${authUser.getUserId()}} : @{'/login'}"></a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            Menu
            <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" th:href="@{'/'}" th:text="#{nav.home}"></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="${isAuth}!='' ? @{'/logout'} : @{'/login'}" th:text="${isAuth}!='' ? #{nav.logout} : #{nav.login}"></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:if="${isAuth}==''" th:href="@{'/register'}" th:text="#{nav.register}"></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:if="${isAuth!=''} and ${isAdmin}" th:href="@{'/users'}" th:text="#{nav.users}"></a>
                </li>
                <li class="nav-item">
                    <span class="nav-link" th:text="#{nav.lang.change}"></span>
                    <select id="locales">
                        <option value=""></option>
                        <option value="en" th:text="#{lang.en}"></option>
                        <option value="pl" th:text="#{lang.pl}"></option>
                        <option value="xx" th:text="#{lang.xx}"></option>
                    </select>
                    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js">
                    </script>
                    <script type="text/javascript">
                        $(document).ready(function() {
                            $("#locales").change(function () {
                                var selectedOption = $('#locales').val();
                                if (selectedOption != ''){
                                    window.location.replace('/?lang=' + selectedOption);
                                }
                            });
                        });
                    </script>
                </li>
            </ul>
        </div>
    </div>
</nav>

</body>
</html>